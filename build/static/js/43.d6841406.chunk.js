(this.webpackJsonpgreen=this.webpackJsonpgreen||[]).push([[43],{665:function(e,t,a){"use strict";a.r(t);var n=a(148),o=a(36),r=a(47),l=a(14),s=a(17),i=a(16),c=a(15),u=a(3),d=a(145),h=a.n(d),m=a(146),f=a(409),b=a(505),g=a(415),p=a(69),v=a.n(p),j=a(414),O=a(0),S=0,M=0,k=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).getModele=function(){h.a.get(m.f).then((function(t){var a=t.data.data.modeles;console.log(a),e.setState({modeles:a,isLoading:!1}),console.log(e.state.modeles)})).catch((function(e){console.log("get modele failed!"),console.log(e)}))},e.addMachine=function(){var t=e.state.formMachine,a=t.nom,n=t.zone,o=t.pays,r=t.rue,l=t.ville,s=t.quartier,i=t.latitude,c=t.longitude,u=e.state.selectedModele.key;console.log(u);var d={pays:o,rue:r,ville:l,quartier:s},f={latitude:i,longitude:c};console.log(e.state.formMachine),h.a.post(m.d,{nom:a,zone:n,localite:d,id_modele:u,coordonnees:f}).then((function(t){e.setState({formMachine:{nom:"",zone:"",pays:"",ville:"",quartier:"",rue:"",libelle:"",latitude:"",longitude:"",key:""},selectedModele:{}}),console.log("Une GreenBox!"),v()("Felicitation!","Cher GreenManager, vous venez d'ajouter une GreenBox de plus","success").then((function(t){e.props.history.push("/list_machine/")}))})).catch((function(e){console.error("Error adding document: ",e),v()("Desol\xe9e!","Cette GreenBox n'a pu \xeatre ajout\xe9e, veuillez v\xe9rifier vos param\xe8tres de connexion","warning")}))},e.toggleStep=function(t){return function(){var a=e.formMachineRef,n=document.getElementById("tabPane"+e.state.activeStep),l=[].slice.call(n.querySelectorAll("input,select")),s=g.a.bulkValidate(l),i=s.errors,c=s.hasError;if(e.setState(Object(o.a)({},a.name,Object(r.a)(Object(r.a)({},e.state[a.name]),{},{errors:i}))),!c){switch(e.state.activeStep!==t&&e.setState({activeStep:t}),t){case"1":e.setState({progressValue:[100,0,0]});break;case"2":e.setState({progressValue:[0,100,0]});break;case"3":e.setState({progressValue:[0,0,100]});break;default:console.log("default")}}}},e.validateOnChange=function(t){var a,n=t.target,l=n.form,s="checkbox"===n.type?n.checked:n.value,i=g.a.validate(n);if(e.setState(Object(o.a)({},l.name,Object(r.a)(Object(r.a)({},e.state[l.name]),{},(a={},Object(o.a)(a,n.name,s),Object(o.a)(a,"errors",Object(r.a)(Object(r.a)({},e.state[l.name].errors),{},Object(o.a)({},n.name,i))),a)))),"libelle"==n.name){var c=e.state.modeles.find((function(e){return e.libelle==s}));console.log(c),e.setState({selectedModele:c})}},e.hasError=function(t,a,n){return e.state[t]&&e.state[t].errors&&e.state[t].errors[a]&&e.state[t].errors[a][n]},e.handleSubmit=function(t){var a=t.target,l=Object(n.a)(a.elements).filter((function(e){return["INPUT","SELECT"].includes(e.nodeName)})),s=g.a.bulkValidate(l),i=s.errors,c=s.hasError;e.setState(Object(o.a)({},a.name,Object(r.a)(Object(r.a)({},e.state[a.name]),{},{errors:i}))),console.log(c?"Form has errors. Check!":"Form Submitted!"),t.preventDefault(),e.addMachine()},e.formRef=function(t){return e.formMachineRef=t},e.state={formMachine:{nom:"",zone:"",pays:"Cameroun",ville:"",quartier:"",rue:"",libelle:"",latitude:S,longitude:M,key:""},modeles:[],isLoading:!0,selectedModele:{},activeStep:"1",progressValue:[100,0,0],path:[{label:"Home",value:"/dashboard_machine"},{label:"Machine",value:"/list_machine"},{label:"Ajouter une machine",value:""}]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getModele()}},{key:"render",value:function(){return console.log(this.state.formMachine),Object(O.jsxs)(f.a,{children:[Object(O.jsx)(j.a,{path:this.state.path}),Object(O.jsx)(b.a,{machine:this.state,formRef:this.formRef,toggleStep:this.toggleStep,validateOnChange:this.validateOnChange,hasError:this.hasError,handleSubmit:this.handleSubmit})]})}}]),a}(u.Component);t.default=k}}]);
//# sourceMappingURL=43.d6841406.chunk.js.map