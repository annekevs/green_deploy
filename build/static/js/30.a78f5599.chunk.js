(this.webpackJsonpgreen=this.webpackJsonpgreen||[]).push([[30],{412:function(e,t,a){"use strict";a(3);var s=a(0),l=function(e){return Object(s.jsx)("div",{className:"content-wrapper",children:e.unwrap?Object(s.jsx)("div",{className:"unwrap",children:e.children}):e.children})};l.defaultProps={unwrap:!1},t.a=l},430:function(e,t,a){"use strict";var s=a(14),l=a(17),c=a(16),r=a(15),n=a(3),i=a(21),o=a(0),d=function(e){Object(c.a)(a,e);var t=Object(r.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.path;return Object(o.jsx)("div",{className:"content-heading",children:Object(o.jsx)("ol",{className:"breadcrumb",children:e.map((function(e){return""==e.value?Object(o.jsxs)("li",{className:"breadcrumb-item active",children:[" ",e.label," "]}):Object(o.jsx)("li",{className:"breadcrumb-item",children:Object(o.jsx)(i.b,{to:e.value,title:e.label,children:e.label})})}))})})}}]),a}(n.Component);t.a=d},439:function(e,t,a){"use strict";var s=a(8),l=a(70),c=a(11),r=a(3),n=a.n(r),i=a(4),o=a.n(i),d=a(20),b=a.n(d),u=a(5);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={children:o.a.node,bar:o.a.bool,multi:o.a.bool,tag:u.l,value:o.a.oneOfType([o.a.string,o.a.number]),min:o.a.oneOfType([o.a.string,o.a.number]),max:o.a.oneOfType([o.a.string,o.a.number]),animated:o.a.bool,striped:o.a.bool,color:o.a.string,className:o.a.string,barClassName:o.a.string,cssModule:o.a.object,style:o.a.object,barStyle:o.a.object,barAriaValueText:o.a.string,barAriaLabelledBy:o.a.string},f=function(e){var t=e.children,a=e.className,l=e.barClassName,r=e.cssModule,i=e.value,o=e.min,d=e.max,j=e.animated,h=e.striped,f=e.color,p=e.bar,x=e.multi,O=e.tag,g=e.style,v=e.barStyle,N=e.barAriaValueText,y=e.barAriaLabelledBy,S=Object(c.a)(e,["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"]),P=Object(u.n)(i)/Object(u.n)(d)*100,w=Object(u.i)(b()(a,"progress"),r),F={className:Object(u.i)(b()("progress-bar",p&&a||l,j?"progress-bar-animated":null,f?"bg-"+f:null,h||j?"progress-bar-striped":null),r),style:m(m(m({},p?g:{}),v),{},{width:P+"%"}),role:"progressbar","aria-valuenow":i,"aria-valuemin":o,"aria-valuemax":d,"aria-valuetext":N,"aria-labelledby":y,children:t};return p?n.a.createElement(O,Object(s.a)({},S,F)):n.a.createElement(O,Object(s.a)({},S,{style:g,className:w}),x?t:n.a.createElement("div",F))};f.propTypes=h,f.defaultProps={tag:"div",value:0,min:0,max:100,style:{},barStyle:{}},t.a=f},449:function(e,t,a){"use strict";var s=a(8),l=a(11),c=a(25),r=a(12),n=a(3),i=a.n(n),o=a(4),d=a.n(o),b=a(20),u=a.n(b),j=a(5),m={children:d.a.node,inline:d.a.bool,tag:j.l,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),className:d.a.string,cssModule:d.a.object},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.submit=a.submit.bind(Object(c.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.inline,r=e.tag,n=e.innerRef,o=Object(l.a)(e,["className","cssModule","inline","tag","innerRef"]),d=Object(j.i)(u()(t,!!c&&"form-inline"),a);return i.a.createElement(r,Object(s.a)({},o,{ref:n,className:d}))},t}(n.Component);h.propTypes=m,h.defaultProps={tag:"form"},t.a=h},451:function(e,t,a){"use strict";var s=a(8),l=a(11),c=a(3),r=a.n(c),n=a(4),i=a.n(n),o=a(20),d=a.n(o),b=a(5),u={children:i.a.node,row:i.a.bool,check:i.a.bool,inline:i.a.bool,disabled:i.a.bool,tag:b.l,className:i.a.string,cssModule:i.a.object},j=function(e){var t=e.className,a=e.cssModule,c=e.row,n=e.disabled,i=e.check,o=e.inline,u=e.tag,j=Object(l.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),m=Object(b.i)(d()(t,!!c&&"row",i?"form-check":"form-group",!(!i||!o)&&"form-check-inline",!(!i||!n)&&"disabled"),a);return"fieldset"===u&&(j.disabled=n),r.a.createElement(u,Object(s.a)({},j,{className:m}))};j.propTypes=u,j.defaultProps={tag:"div"},t.a=j},516:function(e,t,a){"use strict";var s=a(8),l=a(11),c=a(25),r=a(12),n=a(3),i=a.n(n),o=a(4),d=a.n(o),b=a(20),u=a.n(b),j=a(5),m={children:d.a.node,type:d.a.string,size:d.a.oneOfType([d.a.number,d.a.string]),bsSize:d.a.string,valid:d.a.bool,invalid:d.a.bool,tag:j.l,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),plaintext:d.a.bool,addon:d.a.bool,className:d.a.string,cssModule:d.a.object},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,r=e.bsSize,n=e.valid,o=e.invalid,d=e.tag,b=e.addon,m=e.plaintext,h=e.innerRef,f=Object(l.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),p=["radio","checkbox"].indexOf(c)>-1,x=new RegExp("\\D","g"),O=d||("select"===c||"textarea"===c?c:"input"),g="form-control";m?(g+="-plaintext",O=d||"input"):"file"===c?g+="-file":"range"===c?g+="-range":p&&(g=b?null:"form-check-input"),f.size&&x.test(f.size)&&(Object(j.o)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=f.size,delete f.size);var v=Object(j.i)(u()(t,o&&"is-invalid",n&&"is-valid",!!r&&"form-control-"+r,g),a);return("input"===O||d&&"function"===typeof d)&&(f.type=c),f.children&&!m&&"select"!==c&&"string"===typeof O&&"select"!==O&&(Object(j.o)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete f.children),i.a.createElement(O,Object(s.a)({},f,{ref:h,className:v,"aria-invalid":o}))},t}(i.a.Component);h.propTypes=m,h.defaultProps={type:"text"},t.a=h},994:function(e,t,a){"use strict";a.r(t);var s=a(36),l=a(47),c=a(14),r=a(17),n=a(16),i=a(15),o=a(3),d=a(21),b=a(510),u=a.n(b),j=a(149),m=a(147),h=a.n(m),f=a(148),p=a(412),x=a(439),O=a(427),g=a(201),v=a(449),N=a(451),y=a(516),S=a(438),P=a(450),w=a(474),F=a(476),k=a.n(F),T=(a(448),a(478)),M=a.n(T),C=a(479),R=a.n(C),z=a(482),E=a.n(z),D=a(430),A=a(71),L=a(0),V=z.Search.SearchBar,B=z.CSVExport.ExportCSVButton;function _(e,t){var a=new Object(t.localite),s=a.lieu,l=(a.pays,a.quartier);a.ville;return Object(L.jsxs)("address",{children:[Object(L.jsxs)("span",{children:[" ",l," "]}),Object(L.jsx)("br",{}),Object(L.jsxs)("small",{className:"text-italic",children:[" ",s," "]})]})}function I(e,t){var a=new Date(t.createdAt).toUTCString();return console.log(t.lastSent),Object(L.jsxs)("span",{children:[" ",a," "]})}function q(e,t){return t.status?Object(L.jsx)("div",{className:"circle circle-lg bg-success","data-title":"normal"}):Object(L.jsx)("div",{className:"circle circle-lg bg-danger","data-title":"normal"})}function Y(e,t){return 0==t.level?Object(L.jsx)(x.a,{color:"gray-light",value:"100",children:" 0% "}):t.level<50||t.level<75?Object(L.jsxs)(x.a,{color:"warning",value:e,children:[" ",e,"% "]}):Object(L.jsxs)(x.a,{color:"danger",value:e,children:[" ",e,"% "]})}function J(e,t,a){return Object(L.jsxs)("div",{className:"md-6 row ",children:[Object(L.jsx)("div",{className:"pl-3 pr-3",children:Object(L.jsxs)(d.b,{to:"/show_machine/".concat(t.key),children:[Object(L.jsx)("span",{className:"fas fa-info-circle fa-1x text-info"})," "]})}),Object(L.jsx)("div",{className:"pl-3",children:Object(L.jsxs)(d.b,{to:"/edit_machine/".concat(t.key),children:[Object(L.jsx)("span",{className:"fas fa-pencil-alt fa-1x text-warning"})," "]})})]})}var U={mode:"radio",clickToSelect:!0},G=[{label:"tous",value:"all"},{label:"disponible",value:!0},{label:"indisponible",value:!1}],H={backgroundColor:"#E5F1FB",color:""},Z=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e,r){var n;return Object(c.a)(this,a),(n=t.call(this,e,r)).onChangeDay=function(e){n.setState({formFilter:{date:e}});e.toDate().toUTCString();var t=n.state.machines[0].created;console.log(t)},n.onChangeMonth=function(e){n.setState({formFilter:{mois:e}})},n.onChangeStatus=function(e){var t=e.target,a=t.form,c="checkbox"===t.type?t.checked:t.value;n.setState(Object(s.a)({},a.name,Object(l.a)(Object(l.a)({},n.state[a.name]),{},Object(s.a)({},t.name,c))))},n.allowFilter=function(e){console.log(n.state.formFilter);var t=[],a=G.find((function(e){return e.label==n.state.formFilter.status}));switch(console.log(a.value),a.value){case!0:t=n.state.defaultMachines.filter((function(e){return 1==e.status}));break;case!1:t=n.state.defaultMachines.filter((function(e){return 0==e.status}));break;case"all":t=n.state.defaultMachines;default:console.log("default")}n.setState({machines:t,isFilter:!0}),console.log(t)},n.clearFilter=function(e){var t=n.state.defaultMachines;n.setState({machines:t,isFilter:!1,formFilter:{date:"",mois:"",heure:"",status:G[0]}})},n.ref=j.a.firestore().collection("machines"),n.unsubscribe=null,n.state={machines:[],defaultMachines:[],isFilter:!1,formFilter:{date:"",mois:"",heure:"",status:""},path:[{label:"Home",value:"/dashboard_machine"},{label:"Machine",value:"/list_machine"},{label:"Liste",value:""}],isLoading:!0},n._columns=[{dataField:"key",text:"ID",hidden:!0},{dataField:"nom",text:"Nom",headerStyle:H,sort:!0},{dataField:"zone",text:"Zone",headerStyle:H,sort:!0},{dataField:"localite",text:"Emplacement",headerStyle:H,formatter:_,sort:!0},{dataField:"level",text:"Taux de remplissage",headerStyle:H,formatter:Y,sort:!0},{dataField:"createdAt",text:"Derni\xe8re utilisation",headerStyle:H,formatter:I,sort:!0},{dataField:"status",text:"Statut",headerStyle:H,formatter:q,sort:!0},{dataField:"option",text:"Option",headerStyle:H,isDummyField:!0,formatter:J}],n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get(f.d).then((function(t){var a=t.data.data.machines;console.log(a),e.setState({defaultMachines:a,machines:a,isLoading:!1}),console.log(e.state.defaultMachines)})).catch((function(e){console.log("get machine failed!"),console.log(e)}))}},{key:"render",value:function(){var e=this,t={custom:!0,paginationSize:4,pageStartIndex:1,sizePerPage:4,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,paginationTotalRenderer:i,sizePerPageList:[{text:"2",value:2},{text:"5",value:5},{text:"All",value:this.state.machines.length}],totalSize:this.state.machines.length},a=this.state.isLoading,s=this.state.isFilter;console.log(s);var c=this.state.formFilter.date,r=this.state.formFilter.mois,n=(this.state.formFilter.heure,this.state.formFilter.status),i=function(e,t,a){return Object(L.jsxs)("span",{className:"react-bootstrap-table-pagination-total",children:["Showing ",e," to ",t," of ",a," Results"]})};return a?Object(L.jsx)(A.a,{}):Object(L.jsxs)(p.a,{children:[Object(L.jsx)(D.a,{path:this.state.path}),Object(L.jsx)(C.PaginationProvider,{pagination:R()(t),children:function(t){var a=t.paginationProps,i=t.paginationTableProps;return Object(L.jsxs)("div",{children:[Object(L.jsx)(E.a,{keyField:"key",columns:e._columns,data:e.state.machines,search:!0,children:function(t){return Object(L.jsxs)("div",{children:[Object(L.jsx)(O.a,{children:Object(L.jsx)("div",{className:"col-xl-3 ml-auto",children:Object(L.jsx)(d.b,{to:"/add_machine/",title:"Editer la GreenBox",className:"d-flex col-xl-7 ml-auto pr-3",children:Object(L.jsx)(g.a,{color:"success",children:" Ajouter "})})})}),Object(L.jsxs)(O.a,{children:[Object(L.jsx)("div",{className:"col-xl-7",children:Object(L.jsx)(v.a,{name:"formFilter",children:Object(L.jsxs)("div",{className:"row",children:[Object(L.jsx)("div",{className:"ml-3 d-flex",children:Object(L.jsx)("em",{className:"m-0 fas fa-filter fa-2x text-success align-self-center"})}),Object(L.jsx)(N.a,{className:"col-xl-3",children:Object(L.jsxs)("div",{className:"pl-2 mr-2",children:[Object(L.jsx)("label",{className:"text-bold",children:"Date"}),Object(L.jsx)(k.a,{inputProps:{className:"form-control"},defaultValue:c,value:c,onChange:e.onChangeDay})]})}),Object(L.jsx)(N.a,{className:"col-xl-3",children:Object(L.jsxs)("div",{className:"pl-2 mr-2",children:[Object(L.jsx)("label",{className:"text-bold",children:" Mois "}),Object(L.jsx)(k.a,{inputProps:{className:"form-control"},timeFormat:!1,defaultValue:r,value:r,dateFormat:"YYYY-MM",onChange:e.onChangeMonth})]})}),Object(L.jsx)(N.a,{className:"col-xl-3",children:Object(L.jsxs)("div",{className:"pl-2 mr-2",children:[Object(L.jsx)("label",{className:"text-bold",children:" Status "}),Object(L.jsx)(y.a,{type:"select",name:"status",placeholder:"etat de la machine",onChange:e.onChangeStatus,value:n,children:G.map((function(e){return Object(L.jsxs)("option",{children:[" ",e.label," "]})}))})]})}),s?Object(L.jsxs)("div",{className:"row pl-4 d-flex align-items-center",children:[Object(L.jsx)("span",{className:"fas fa-minus-square text-inverse fa-2x mr-2",onClick:e.clearFilter}),Object(L.jsx)("p",{children:" Effacer "})]}):Object(L.jsxs)("div",{className:"row pl-4 d-flex align-items-center",children:[Object(L.jsx)("span",{className:"fas fa-check-square text-success fa-2x mr-2",onClick:e.allowFilter}),Object(L.jsx)("p",{className:"align-self-center",children:" Appliquer "})]})]})})}),Object(L.jsx)("div",{className:"col-xl-4 align-self-center ml-auto",children:Object(L.jsxs)("div",{className:"media",children:[Object(L.jsx)("div",{className:"media-body",children:Object(L.jsx)(V,Object(l.a)(Object(l.a)({},t.searchProps),{},{className:"custome-search-field",style:{color:"dark"},placeholder:"Rechercher un nom, une zone, un niveau de remplissage"}))}),Object(L.jsx)("div",{className:"align-self-start mr-2",children:Object(L.jsx)("em",{className:"fas fa-search fa-2x "})})]})})]}),Object(L.jsxs)(S.a,{className:"m-20",children:[Object(L.jsx)(P.a,{className:"ml-5 mr-5",children:Object(L.jsx)(u.a,Object(l.a)(Object(l.a)({bootstrap4:!0,hover:!0,filter:M()(),selectRow:U},t.baseProps),i))}),Object(L.jsx)(w.a,{})]}),Object(L.jsx)("div",{className:"col",children:Object(L.jsxs)("div",{className:"media m-10",children:[Object(L.jsxs)(B,Object(l.a)(Object(l.a)({},t.csvProps),{},{className:"d-flex p-0 mr-5",children:[Object(L.jsx)(g.a,{color:"secondary",children:Object(L.jsx)("em",{className:"fas fa-share text-info"})}),Object(L.jsx)("em",{className:"align-self-center text-dark text-bold",children:"  Exporter au format CSV "})]})),Object(L.jsxs)(d.b,{to:"",title:"Imprimer la liste",className:"d-flex mr-3",children:[Object(L.jsx)(g.a,{color:"secondary",children:Object(L.jsx)("em",{className:"fa fa-print text-purple "})}),Object(L.jsx)("em",{className:"align-self-center text-dark text-bold",children:"  Imprimer la liste "})]}),Object(L.jsx)("div",{className:"col-xl-3",children:"."}),Object(L.jsx)("div",{className:"col-xl-1 ml-auto p-0",children:Object(L.jsx)("small",{className:"mb-0 mt-1 text-dark",children:"Mis \xe0 jour le : 04/05/21 14:24:18"})})]})})]})}}),Object(L.jsx)("div",{className:"ml-auto col-xl-3",children:Object(L.jsx)(C.PaginationListStandalone,Object(l.a)({},a))})]})}})]})}}]),a}(o.Component);t.default=Z}}]);
//# sourceMappingURL=30.a78f5599.chunk.js.map