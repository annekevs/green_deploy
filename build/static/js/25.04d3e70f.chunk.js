(this.webpackJsonpgreen=this.webpackJsonpgreen||[]).push([[25],{409:function(e,t,a){"use strict";a(3);var s=a(0),l=function(e){return Object(s.jsx)("div",{className:"content-wrapper",children:e.unwrap?Object(s.jsx)("div",{className:"unwrap",children:e.children}):e.children})};l.defaultProps={unwrap:!1},t.a=l},414:function(e,t,a){"use strict";var s=a(14),l=a(17),c=a(16),n=a(15),i=a(3),r=a(22),o=a(0),d=function(e){Object(c.a)(a,e);var t=Object(n.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.path;return Object(o.jsx)("div",{className:"content-heading",children:Object(o.jsx)("ol",{className:"breadcrumb",children:e.map((function(e){return""==e.value?Object(o.jsxs)("li",{className:"breadcrumb-item active",children:[" ",e.label," "]}):Object(o.jsx)("li",{className:"breadcrumb-item",children:Object(o.jsx)(r.b,{to:e.value,title:e.label,children:e.label})})}))})})}}]),a}(i.Component);t.a=d},428:function(e,t,a){"use strict";var s=a(8),l=a(11),c=a(25),n=a(12),i=a(3),r=a.n(i),o=a(4),d=a.n(o),u=a(20),j=a.n(u),b=a(5),m={children:d.a.node,inline:d.a.bool,tag:b.l,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),className:d.a.string,cssModule:d.a.object},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.submit=a.submit.bind(Object(c.a)(a)),a}Object(n.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.inline,n=e.tag,i=e.innerRef,o=Object(l.a)(e,["className","cssModule","inline","tag","innerRef"]),d=Object(b.i)(j()(t,!!c&&"form-inline"),a);return r.a.createElement(n,Object(s.a)({},o,{ref:i,className:d}))},t}(i.Component);h.propTypes=m,h.defaultProps={tag:"form"},t.a=h},429:function(e,t,a){"use strict";var s=a(8),l=a(11),c=a(3),n=a.n(c),i=a(4),r=a.n(i),o=a(20),d=a.n(o),u=a(5),j={children:r.a.node,row:r.a.bool,check:r.a.bool,inline:r.a.bool,disabled:r.a.bool,tag:u.l,className:r.a.string,cssModule:r.a.object},b=function(e){var t=e.className,a=e.cssModule,c=e.row,i=e.disabled,r=e.check,o=e.inline,j=e.tag,b=Object(l.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),m=Object(u.i)(d()(t,!!c&&"row",r?"form-check":"form-group",!(!r||!o)&&"form-check-inline",!(!r||!i)&&"disabled"),a);return"fieldset"===j&&(b.disabled=i),n.a.createElement(j,Object(s.a)({},b,{className:m}))};b.propTypes=j,b.defaultProps={tag:"div"},t.a=b},479:function(e,t,a){"use strict";var s=a(8),l=a(11),c=a(25),n=a(12),i=a(3),r=a.n(i),o=a(4),d=a.n(o),u=a(20),j=a.n(u),b=a(5),m={children:d.a.node,type:d.a.string,size:d.a.oneOfType([d.a.number,d.a.string]),bsSize:d.a.string,valid:d.a.bool,invalid:d.a.bool,tag:b.l,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),plaintext:d.a.bool,addon:d.a.bool,className:d.a.string,cssModule:d.a.object},h=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(n.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,n=e.bsSize,i=e.valid,o=e.invalid,d=e.tag,u=e.addon,m=e.plaintext,h=e.innerRef,f=Object(l.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),x=["radio","checkbox"].indexOf(c)>-1,p=new RegExp("\\D","g"),O=d||("select"===c||"textarea"===c?c:"input"),g="form-control";m?(g+="-plaintext",O=d||"input"):"file"===c?g+="-file":"range"===c?g+="-range":x&&(g=u?null:"form-check-input"),f.size&&p.test(f.size)&&(Object(b.o)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),n=f.size,delete f.size);var v=Object(b.i)(j()(t,o&&"is-invalid",i&&"is-valid",!!n&&"form-control-"+n,g),a);return("input"===O||d&&"function"===typeof d)&&(f.type=c),f.children&&!m&&"select"!==c&&"string"===typeof O&&"select"!==O&&(Object(b.o)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete f.children),r.a.createElement(O,Object(s.a)({},f,{ref:h,className:v,"aria-invalid":o}))},t}(r.a.Component);h.propTypes=m,h.defaultProps={type:"text"},t.a=h},664:function(e,t,a){"use strict";a.r(t);var s=a(36),l=a(47),c=a(14),n=a(17),i=a(16),r=a(15),o=a(3),d=a(22),u=a(457),j=a.n(u),b=a(147),m=a(145),h=a.n(m),f=a(146),x=a(409),p=a(424),O=a(416),g=a(199),v=a(428),N=a(429),y=a(479),F=a(417),S=a(419),k=a(446),P=a(463),w=a.n(P),M=(a(435),a(464)),C=a.n(M),R=a(465),T=a.n(R),z=a(468),E=a.n(z),D=a(414),L=a(0),_=z.Search.SearchBar,V=z.CSVExport.ExportCSVButton;function A(e,t){var a=new Object(t.localite),s=a.lieu,l=(a.pays,a.quartier);a.ville;return Object(L.jsxs)("address",{children:[Object(L.jsxs)("span",{children:[" ",l," "]}),Object(L.jsx)("br",{}),Object(L.jsxs)("small",{className:"text-italic",children:[" ",s," "]})]})}function B(e,t){var a=new Date(t.createdAt).toUTCString();return Object(L.jsxs)("span",{children:[" ",a," "]})}function I(e,t){return t.status?Object(L.jsx)("div",{className:"circle circle-lg bg-success","data-title":"normal"}):Object(L.jsx)("div",{className:"circle circle-lg bg-danger","data-title":"normal"})}function q(e,t){return 0==t.level?Object(L.jsx)(p.a,{color:"gray-light",value:"100",children:" 0% "}):t.level<50||t.level<75?Object(L.jsxs)(p.a,{color:"warning",value:e,children:[" ",e,"% "]}):Object(L.jsxs)(p.a,{color:"danger",value:e,children:[" ",e,"% "]})}function Y(e,t,a){return Object(L.jsxs)("div",{className:"md-6 row ",children:[Object(L.jsx)("div",{className:"pl-3 pr-3",children:Object(L.jsxs)(d.b,{to:"/show_machine/".concat(t.key),children:[Object(L.jsx)("span",{className:"fas fa-info-circle fa-1x text-info"})," "]})}),Object(L.jsx)("div",{className:"pl-3",children:Object(L.jsxs)(d.b,{to:"/edit_machine/".concat(t.key),children:[Object(L.jsx)("span",{className:"fas fa-pencil-alt fa-1x text-warning"})," "]})})]})}var J={mode:"radio",clickToSelect:!0},U=[{label:"tous",value:"all"},{label:"disponible",value:!0},{label:"indisponible",value:!1}],G={backgroundColor:"#E5F1FB",color:""},H=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e,n){var i;return Object(c.a)(this,a),(i=t.call(this,e,n)).onChangeDay=function(e){i.setState({formFilter:{date:e}});e.toDate().toUTCString();var t=i.state.machines[0].created;console.log(t)},i.onChangeMonth=function(e){i.setState({formFilter:{mois:e}})},i.onChangeStatus=function(e){var t=e.target,a=t.form,c="checkbox"===t.type?t.checked:t.value;i.setState(Object(s.a)({},a.name,Object(l.a)(Object(l.a)({},i.state[a.name]),{},Object(s.a)({},t.name,c))))},i.allowFilter=function(e){console.log(i.state.formFilter);var t=[],a=U.find((function(e){return e.label==i.state.formFilter.status}));switch(console.log(a.value),a.value){case!0:t=i.state.defaultMachines.filter((function(e){return 1==e.status}));break;case!1:t=i.state.defaultMachines.filter((function(e){return 0==e.status}));break;case"all":t=i.state.defaultMachines;default:console.log("default")}i.setState({machines:t,isFilter:!0}),console.log(t)},i.clearFilter=function(e){var t=i.state.defaultMachines;i.setState({machines:t,isFilter:!1,formFilter:{date:"",mois:"",heure:"",status:U[0]}})},i.ref=b.a.firestore().collection("machines"),i.unsubscribe=null,i.state={machines:[],defaultMachines:[],isFilter:!1,formFilter:{date:"",mois:"",heure:"",status:""},path:[{label:"Home",value:"/dashboard_machine"},{label:"Machine",value:"/list_machine"},{label:"Liste",value:""}],isLoading:!0},i._columns=[{dataField:"key",text:"ID",hidden:!0},{dataField:"nom",text:"Nom",headerStyle:G,sort:!0},{dataField:"zone",text:"Zone",headerStyle:G,sort:!0},{dataField:"localite",text:"Emplacement",headerStyle:G,formatter:A,sort:!0},{dataField:"level",text:"Taux de remplissage",headerStyle:G,formatter:q,sort:!0},{dataField:"createdAt",text:"Date d'ajout",headerStyle:G,formatter:B,sort:!0},{dataField:"status",text:"Statut",headerStyle:G,formatter:I,sort:!0},{dataField:"option",text:"Option",headerStyle:G,isDummyField:!0,formatter:Y}],i}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get(f.d).then((function(t){var a=t.data.data.machines;console.log(a),e.setState({defaultMachines:a,machines:a,isLoading:!1}),console.log(e.state.defaultMachines)})).catch((function(e){console.log("get machine failed!"),console.log(e)}))}},{key:"render",value:function(){var e=this,t={custom:!0,paginationSize:4,pageStartIndex:1,sizePerPage:4,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,paginationTotalRenderer:r,sizePerPageList:[{text:"2",value:2},{text:"5",value:5},{text:"All",value:this.state.machines.length}],totalSize:this.state.machines.length},a=this.state.isLoading,s=this.state.isFilter;console.log(s);var c=this.state.formFilter.date,n=this.state.formFilter.mois,i=(this.state.formFilter.heure,this.state.formFilter.status),r=function(e,t,a){return Object(L.jsxs)("span",{className:"react-bootstrap-table-pagination-total",children:["Showing ",e," to ",t," of ",a," Results"]})};return a?Object(L.jsx)("div",{children:" En cours de chargement... "}):Object(L.jsxs)(x.a,{children:[Object(L.jsx)(D.a,{path:this.state.path}),Object(L.jsx)(R.PaginationProvider,{pagination:T()(t),children:function(t){var a=t.paginationProps,r=t.paginationTableProps;return Object(L.jsxs)("div",{children:[Object(L.jsx)(E.a,{keyField:"key",columns:e._columns,data:e.state.machines,search:!0,children:function(t){return Object(L.jsxs)("div",{children:[Object(L.jsx)(O.a,{children:Object(L.jsx)("div",{className:"col-xl-3 ml-auto",children:Object(L.jsx)(d.b,{to:"/add_machine/",title:"Editer la GreenBox",className:"d-flex col-xl-7 ml-auto pr-3",children:Object(L.jsx)(g.a,{color:"success",children:" Ajouter "})})})}),Object(L.jsxs)(O.a,{children:[Object(L.jsx)("div",{className:"col-xl-7",children:Object(L.jsx)(v.a,{name:"formFilter",children:Object(L.jsxs)("div",{className:"row",children:[Object(L.jsx)("div",{className:"ml-3 d-flex",children:Object(L.jsx)("em",{className:"m-0 fas fa-filter fa-2x text-success align-self-center"})}),Object(L.jsx)(N.a,{className:"col-xl-3",children:Object(L.jsxs)("div",{className:"pl-2 mr-2",children:[Object(L.jsx)("label",{className:"text-bold",children:"Date"}),Object(L.jsx)(w.a,{inputProps:{className:"form-control"},defaultValue:c,value:c,onChange:e.onChangeDay})]})}),Object(L.jsx)(N.a,{className:"col-xl-3",children:Object(L.jsxs)("div",{className:"pl-2 mr-2",children:[Object(L.jsx)("label",{className:"text-bold",children:" Mois "}),Object(L.jsx)(w.a,{inputProps:{className:"form-control"},timeFormat:!1,defaultValue:n,value:n,dateFormat:"YYYY-MM",onChange:e.onChangeMonth})]})}),Object(L.jsx)(N.a,{className:"col-xl-3",children:Object(L.jsxs)("div",{className:"pl-2 mr-2",children:[Object(L.jsx)("label",{className:"text-bold",children:" Status "}),Object(L.jsx)(y.a,{type:"select",name:"status",placeholder:"etat de la machine",onChange:e.onChangeStatus,value:i,children:U.map((function(e){return Object(L.jsxs)("option",{children:[" ",e.label," "]})}))})]})}),s?Object(L.jsxs)("div",{className:"row pl-4 d-flex align-items-center",children:[Object(L.jsx)("span",{className:"fas fa-minus-square text-inverse fa-2x mr-2",onClick:e.clearFilter}),Object(L.jsx)("p",{children:" Effacer "})]}):Object(L.jsxs)("div",{className:"row pl-4 d-flex align-items-center",children:[Object(L.jsx)("span",{className:"fas fa-check-square text-success fa-2x mr-2",onClick:e.allowFilter}),Object(L.jsx)("p",{className:"align-self-center",children:" Appliquer "})]})]})})}),Object(L.jsx)("div",{className:"col-xl-4 align-self-center ml-auto",children:Object(L.jsxs)("div",{className:"media",children:[Object(L.jsx)("div",{className:"media-body",children:Object(L.jsx)(_,Object(l.a)(Object(l.a)({},t.searchProps),{},{className:"custome-search-field",style:{color:"dark"},placeholder:"Rechercher un nom, une zone, un niveau de remplissage"}))}),Object(L.jsx)("div",{className:"align-self-start mr-2",children:Object(L.jsx)("em",{className:"fas fa-search fa-2x "})})]})})]}),Object(L.jsxs)(F.a,{className:"m-20",children:[Object(L.jsx)(S.a,{className:"ml-5 mr-5",children:Object(L.jsx)(j.a,Object(l.a)(Object(l.a)({bootstrap4:!0,hover:!0,filter:C()(),selectRow:J},t.baseProps),r))}),Object(L.jsx)(k.a,{})]}),Object(L.jsx)("div",{className:"col",children:Object(L.jsxs)("div",{className:"media m-10",children:[Object(L.jsxs)(V,Object(l.a)(Object(l.a)({},t.csvProps),{},{className:"d-flex p-0 mr-5",children:[Object(L.jsx)(g.a,{color:"secondary",children:Object(L.jsx)("em",{className:"fas fa-share text-info"})}),Object(L.jsx)("em",{className:"align-self-center text-dark text-bold",children:"  Exporter au format CSV "})]})),Object(L.jsxs)(d.b,{to:"",title:"Imprimer la liste",className:"d-flex mr-3",children:[Object(L.jsx)(g.a,{color:"secondary",children:Object(L.jsx)("em",{className:"fa fa-print text-purple "})}),Object(L.jsx)("em",{className:"align-self-center text-dark text-bold",children:"  Imprimer la liste "})]}),Object(L.jsx)("div",{className:"col-xl-3",children:"."}),Object(L.jsx)("div",{className:"col-xl-1 ml-auto p-0",children:Object(L.jsx)("small",{className:"mb-0 mt-1 text-dark",children:"Mis \xe0 jour le : 04/05/21 14:24:18"})})]})})]})}}),Object(L.jsx)("div",{className:"ml-auto col-xl-3",children:Object(L.jsx)(R.PaginationListStandalone,Object(l.a)({},a))})]})}})]})}}]),a}(o.Component);t.default=H}}]);
//# sourceMappingURL=25.04d3e70f.chunk.js.map