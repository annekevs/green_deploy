{"version":3,"sources":["components/Machine/Layout/ContentWrapper.js","components/Machine/Notifications/ListAlerte.js"],"names":["ContentWrapper","props","className","unwrap","children","defaultProps","VuFormatter","value","data-title","DateFormatter","Date","toString","OptionFormatter","type","ListAlerte","context","onCollectionUpdate","querySnapshot","alertes","forEach","doc","data","machine","severite","date","description","motif","vu","push","key","id","setState","rows","slice","rowGetter","i","state","handleGridSort","sortColumn","sortDirection","sort","a","b","ref","firebase","firestore","collection","unsubscribe","_columns","name","width","sortable","formatter","this","onSnapshot","fluid","onGridSort","columns","rowsCount","length","Component"],"mappings":"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","file":"static/js/47.3df9c636.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Wrapper element for template content\n */\nconst ContentWrapper = props =>(\n    <div className=\"content-wrapper\">\n        {props.unwrap ?\n            (<div className=\"unwrap\">{props.children}</div>)\n            :\n            (props.children)\n        }\n    </div>\n)\n\nContentWrapper.propTypes = {\n    /** add element with 'unwrap' class to expand content area */\n    unwrap: PropTypes.bool\n}\nContentWrapper.defaultProps = {\n    unwrap: false\n}\n\nexport default ContentWrapper;\n","import React, { Component } from 'react';\nimport ContentWrapper from '../Layout/ContentWrapper';\nimport { Container, Progress } from 'reactstrap';\nimport ReactDataGrid from 'react-data-grid';\nimport firebase from '../../../firebase';\n\n// Custom Formatter component\nconst PercentCompleteFormatter = props => (\n    props.value == 0 ? (\n        <Progress color='gray-dark' value='100'> indéfini </Progress>        \n    ):(\n        <Progress color={props.value < 50 ? 'success' : props.value < 75 ? 'warning' : 'danger'}\n            value={props.value}> {props.value}%\n        </Progress>\n    )\n)\n\nconst VuFormatter = props => (\n    props.value? (\n        <div className=\"fas fa-check text-success\" data-title=\"normal\"/>\n    ):(\n        <div className=\"circle circle-lg bg-danger\" data-title=\"normal\"/>\n    )\n)\n\nconst DateFormatter = props => (\n    new Date(props.value).toString()\n)\n\nconst OptionFormatter = props => (\n    <div className=\"checkbox c-checkbox\">\n        <label>\n            <input type=\"checkbox\"/>\n            <span className=\"fa fa-check-circle\"></span>\n        </label>\n    </div>\n)\n\nclass ListAlerte extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.ref = firebase.firestore().collection('alertes');\n        this.unsubscribe = null;\n        this._columns = [\n            {\n                key: 'machine',\n                name: 'Machine',\n                width: 70,\n                sortable: true\n            },\n            {\n                key: 'type',\n                name: 'Type',\n                width: 110\n            },\n            {\n                key: 'severite',\n                name: 'Severite',\n                sortable: true\n            },\n            {\n                key: 'date',\n                name: 'Date',\n                formatter: DateFormatter,\n                sortable: true\n            },\n            {\n                key: 'description',\n                name: 'Description',\n                sortable: true\n            },\n            {\n                key: 'motif',\n                name: 'Motif',\n                sortable: true\n            },\n            {\n                key: 'vu',\n                name: 'Vu',\n                width: 50,\n                formatter: VuFormatter,\n                sortable: true\n            },\n            {\n                key: 'option',\n                name: 'Option',\n                formatter: OptionFormatter,\n                sortable: true\n            }\n        ];\n\n        this.state = { \n           // originalRows, // creer au départ\n           // rows, // modifier dans la suite\n            alertes : [],\n            rows: [] \n        };\n    }\n    \n    onCollectionUpdate = (querySnapshot) => {\n        const alertes = [];\n        querySnapshot.forEach((doc) => {\n          const { machine, type, severite, date, description, motif, vu } = doc.data();\n          alertes.push({\n            key: doc.id,\n            doc, // DocumentSnapshot\n            machine,\n            type,\n            severite,\n            date,\n            description,\n            motif,\n            vu,\n          });\n        });\n        this.setState({\n          alertes : alertes,\n          rows : alertes.slice(0)\n       });\n    }\n    \n    componentDidMount() {\n        this.unsubscribe = this.ref.onSnapshot(this.onCollectionUpdate);\n    }\n    \n    rowGetter = (i) => this.state.rows[i]\n\n    handleGridSort = (sortColumn, sortDirection) => {\n        const comparer = (a, b) => {\n          if (sortDirection === 'ASC') {\n            return (a[sortColumn] > b[sortColumn]) ? 1 : -1;\n          } else if (sortDirection === 'DESC') {\n            return (a[sortColumn] < b[sortColumn]) ? 1 : -1;\n          }\n        };\n\n        const rows = sortDirection === 'NONE' ? this.state.alertes.slice(0) : this.state.rows.sort(comparer);\n\n        this.setState({ rows });\n    };\n\n    render() {\n        return  (\n            <ContentWrapper>\n                <div className=\"content-heading\">Liste des alertes </div>\n                <div className=\"mb-3 d-flex\">\n                    <div>\n                        <p className=\"mb-0 mt-1\">Dernière modification : 04/05/21 14:24:18</p>\n                    </div>\n                    <div className=\"ml-auto\">\n                        <button className=\"btn btn-sm btn-secondary\" type=\"button\">\n                            <em className=\"fas fa-share\"></em>\n                        </button>\n                        <button className=\"btn btn-sm btn-secondary\" type=\"button\">\n                            <em className=\"fa fa-print\"></em>\n                        </button>\n                    </div>\n                </div>\n                <Container fluid>\n                    <ReactDataGrid\n                        onGridSort={this.handleGridSort}\n                        columns={this._columns}\n                        rowGetter={this.rowGetter}\n                        rowsCount={this.state.rows.length}\n                    />\n                </Container>\n            </ContentWrapper>\n        )\n    }\n}\n\nexport default ListAlerte;"],"sourceRoot":""}