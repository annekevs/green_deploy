(this.webpackJsonpgreen=this.webpackJsonpgreen||[]).push([[15],{413:function(e,a,t){"use strict";t(3);var r=t(0),n=function(e){return Object(r.jsx)("div",{className:"content-wrapper",children:e.unwrap?Object(r.jsx)("div",{className:"unwrap",children:e.children}):e.children})};n.defaultProps={unwrap:!1},a.a=n},415:function(e,a,t){"use strict";var r=t(36),n=t(47),s=t(95),c=t(427),o=t.n(c),i={validate:function(e){var a="checkbox"===e.type,t=a?e.checked:e.value;if(!e.name)throw new Error("Input name must not be empty.");var r=e.getAttribute("data-param"),n=JSON.parse(e.getAttribute("data-validate")),c=[];return n&&n.length&&n.forEach((function(e){switch(e){case"required":c[e]=a?!1===t:o.a.isEmpty(t);break;case"email":c[e]=!o.a.isEmail(t);break;case"number":c[e]=!o.a.isNumeric(t);break;case"integer":c[e]=!o.a.isInt(t);break;case"alphanum":c[e]=!o.a.isAlphanumeric(t);break;case"url":c[e]=!o.a.isURL(t);break;case"equalto":var n=document.getElementById(r).value;c[e]=!o.a.equals(t,n);break;case"minlen":c[e]=!o.a.isLength(t,{min:r});break;case"maxlen":c[e]=!o.a.isLength(t,{max:r});break;case"len":var i=JSON.parse(r),l=Object(s.a)(i,2),u=l[0],m=l[1];c[e]=!o.a.isLength(t,{min:u,max:m});break;case"min":c[e]=!o.a.isInt(t,{min:o.a.toInt(r)});break;case"max":c[e]=!o.a.isInt(t,{max:o.a.toInt(r)});break;case"list":var d=JSON.parse(r);c[e]=!o.a.isIn(t,d);break;default:throw new Error("Unrecognized validator.")}})),c},bulkValidate:function(e){var a=this,t={},s=!1;return e.forEach((function(e){var c=a.validate(e);t=Object(n.a)(Object(n.a)({},t),{},Object(r.a)({},e.name,c)),s||(s=Object.keys(c).some((function(e){return c[e]})))})),{errors:t,hasError:s}}};a.a=i},417:function(e,a,t){"use strict";var r=t(8),n=t(11),s=t(3),c=t.n(s),o=t(4),i=t.n(o),l=t(20),u=t.n(l),m=t(5),d={tag:m.l,inverse:i.a.bool,color:i.a.string,body:i.a.bool,outline:i.a.bool,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},b=function(e){var a=e.className,t=e.cssModule,s=e.color,o=e.body,i=e.inverse,l=e.outline,d=e.tag,b=e.innerRef,h=Object(n.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),f=Object(m.i)(u()(a,"card",!!i&&"text-white",!!o&&"card-body",!!s&&(l?"border":"bg")+"-"+s),t);return c.a.createElement(d,Object(r.a)({},h,{className:f,ref:b}))};b.propTypes=d,b.defaultProps={tag:"div"},a.a=b},423:function(e,a,t){"use strict";var r=t(8),n=t(11),s=t(3),c=t.n(s),o=t(4),i=t.n(o),l=t(20),u=t.n(l),m=t(5),d={tag:m.l,className:i.a.string,cssModule:i.a.object},b=function(e){var a=e.className,t=e.cssModule,s=e.tag,o=Object(n.a)(e,["className","cssModule","tag"]),i=Object(m.i)(u()(a,"card-header"),t);return c.a.createElement(s,Object(r.a)({},o,{className:i}))};b.propTypes=d,b.defaultProps={tag:"div"},a.a=b},428:function(e,a,t){"use strict";var r=t(8),n=t(11),s=t(25),c=t(12),o=t(3),i=t.n(o),l=t(4),u=t.n(l),m=t(20),d=t.n(m),b=t(5),h={children:u.a.node,inline:u.a.bool,tag:b.l,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),className:u.a.string,cssModule:u.a.object},f=function(e){function a(a){var t;return(t=e.call(this,a)||this).getRef=t.getRef.bind(Object(s.a)(t)),t.submit=t.submit.bind(Object(s.a)(t)),t}Object(c.a)(a,e);var t=a.prototype;return t.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},t.submit=function(){this.ref&&this.ref.submit()},t.render=function(){var e=this.props,a=e.className,t=e.cssModule,s=e.inline,c=e.tag,o=e.innerRef,l=Object(n.a)(e,["className","cssModule","inline","tag","innerRef"]),u=Object(b.i)(d()(a,!!s&&"form-inline"),t);return i.a.createElement(c,Object(r.a)({},l,{ref:o,className:u}))},a}(o.Component);f.propTypes=h,f.defaultProps={tag:"form"},a.a=f},429:function(e,a,t){"use strict";var r=t(8),n=t(11),s=t(3),c=t.n(s),o=t(4),i=t.n(o),l=t(20),u=t.n(l),m=t(5),d={children:i.a.node,row:i.a.bool,check:i.a.bool,inline:i.a.bool,disabled:i.a.bool,tag:m.l,className:i.a.string,cssModule:i.a.object},b=function(e){var a=e.className,t=e.cssModule,s=e.row,o=e.disabled,i=e.check,l=e.inline,d=e.tag,b=Object(n.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),h=Object(m.i)(u()(a,!!s&&"row",i?"form-check":"form-group",!(!i||!l)&&"form-check-inline",!(!i||!o)&&"disabled"),t);return"fieldset"===d&&(b.disabled=o),c.a.createElement(d,Object(r.a)({},b,{className:h}))};b.propTypes=d,b.defaultProps={tag:"div"},a.a=b},434:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return i}));var r=t(75),n=t.n(r),s=t(96),c=t(147),o=(t(145),t(146),function(){var e=Object(s.a)(n.a.mark((function e(a,t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a,t),e.next=3,c.a.auth().signInWithEmailAndPassword(a,t);case 3:return r=e.sent,console.log("user : ",r),console.log("Sign in succeed ".concat(a,"!")),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),i=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.a.auth().signOut();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},454:function(e,a,t){"use strict";var r=t(14),n=t(17),s=t(16),c=t(15),o=t(3),i=t(22),l=t(0),u=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(e){return Object(r.a)(this,t),a.call(this,e)}return Object(n.a)(t,[{key:"render",value:function(){var e=this.props.path;return Object(l.jsx)("div",{className:"content-heading",children:Object(l.jsx)("ol",{className:"breadcrumb",children:e.map((function(e){return""==e.value?Object(l.jsxs)("li",{className:"breadcrumb-item active",children:[" ",e.label," "]}):Object(l.jsx)("li",{className:"breadcrumb-item",children:Object(l.jsx)(i.b,{to:e.value,title:e.label,children:e.label})})}))})})}}]),t}(o.Component);a.a=u},684:function(e,a,t){"use strict";t.r(a);var r=t(148),n=t(36),s=t(47),c=t(14),o=t(17),i=t(16),l=t(15),u=t(3),m=t(145),d=t.n(m),b=t(146),h=t(413),f=t(415),p=t(69),j=t.n(p),g=t(454),v=t(428),O=t(417),x=t(423),N=t(403),k=t(404),S=t(429),M=t(479),E=t(199),y=(t(20),t(0)),R=function(e){Object(i.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=a.call(this,e)).toggleStep=r.props.toggleStep,r.validateOnChange=r.props.validateOnChange,r.hasError=r.props.hasError,r.handleSubmit=r.props.handleSubmit,r.formRef=r.props.formRef,r}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props.manager.formManager.nom,a=this.props.manager.formManager.email,t=this.props.manager.formManager.role,r=this.props.manager.selectedRole.description;this.props.manager.progressValue[0],this.props.manager.progressValue[1],this.props.manager.progressValue[2];return Object(y.jsx)(h.a,{children:Object(y.jsx)("div",{className:"block-center col-md-8",children:Object(y.jsx)(v.a,{innerRef:this.formRef,className:"form-horizontal",name:"formManager",onSubmit:this.handleSubmit,children:Object(y.jsxs)(O.a,{className:"card-default",children:[Object(y.jsx)(x.a,{className:"pb-0"}),Object(y.jsx)(N.a,{activeTab:this.props.manager.activeStep,children:Object(y.jsxs)(k.a,{id:"tabPane1",tabId:"1",children:[Object(y.jsxs)("div",{className:"pt-3 mb-3",children:[Object(y.jsxs)(S.a,{row:!0,children:[Object(y.jsx)("label",{className:"col-xl-2 col-form-label",children:"Nom"}),Object(y.jsxs)("div",{className:"col-xl-10",children:[Object(y.jsx)(M.a,{type:"text",id:"nom",name:"nom",placeholder:"Nom",invalid:this.hasError("formManager","nom","required"),onChange:this.validateOnChange,"data-validate":'["required"]',value:e}),Object(y.jsx)("span",{className:"invalid-feedback",children:"Veuillez entrer le nom du r\xf4le"})]})]}),Object(y.jsxs)(S.a,{row:!0,children:[Object(y.jsx)("label",{className:"col-xl-2 col-form-label",htmlFor:"signupInputEmail1",children:"Adresse email"}),Object(y.jsxs)("div",{className:"col-xl-10",children:[Object(y.jsx)(M.a,{type:"email",id:"email",name:"email",invalid:this.hasError("formManager","email","required")||this.hasError("formManager","email","email"),onChange:this.validateOnChange,value:a,"data-validate":'["required", "email"]'}),this.hasError("formManager","email","required")&&Object(y.jsx)("span",{className:"invalid-feedback",children:"Veuillez remplir ce champ"}),this.hasError("fformManager","email","email")&&Object(y.jsx)("span",{className:"invalid-feedback",children:"Cette adresse mail n'est pas valide"})]})]}),Object(y.jsxs)(S.a,{row:!0,children:[Object(y.jsx)("label",{className:"col-xl-2 col-form-label",children:"R\xf4le"}),Object(y.jsxs)("div",{className:"col-xl-10",children:[Object(y.jsxs)(M.a,{type:"select",id:"role",name:"role",placeholder:"Affect\xe9 un r\xf4le \xe0 ce manager",invalid:this.hasError("formManager","role","required"),onChange:this.validateOnChange,value:t,"data-validate":'["required"]',children:[this.props.manager.roles.map((function(e){return Object(y.jsxs)("option",{children:[" ",e.nom," "]})})),Object(y.jsx)("span",{className:"invalid-feedback",children:"Veuillez s\xe9lectionner un r\xf4le pour ce manager"})]}),Object(y.jsxs)("small",{children:[" ",r," "]})]})]})]}),Object(y.jsx)("hr",{}),Object(y.jsx)("div",{className:"d-flex",children:Object(y.jsx)(E.a,{className:"ml-auto",color:"success",type:"submit",children:"Suivant"})})]})})]})})})})}}]),t}(u.Component),w=(t(434),function(e){Object(i.a)(t,e);var a=Object(l.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).getRoles=function(){d.a.get(b.i).then((function(a){var t=a.data.data;console.log(t),e.setState({formManager:{role:t[0]},roles:t,isLoading:!1}),console.log(e.state.roles)})).catch((function(e){console.log("get roles failed!",e),j()("Desol\xe9e!","Une erreur est survenue, contacter notre service client au num\xe9ro +237-655-244-570","warning")}))},e.toggleStep=function(a){return function(){var t=e.formManagerRef,r=document.getElementById("tabPane"+e.state.activeStep),c=[].slice.call(r.querySelectorAll("input,select")),o=f.a.bulkValidate(c),i=o.errors,l=o.hasError;if(e.setState(Object(n.a)({},t.name,Object(s.a)(Object(s.a)({},e.state[t.name]),{},{errors:i}))),!l){switch(e.state.activeStep!==a&&e.setState({activeStep:a}),a){case"1":e.setState({progressValue:[100,0,0]});break;case"2":e.setState({progressValue:[0,100,0]});break;case"3":e.setState({progressValue:[0,0,100]});break;default:console.log("default")}}}},e.validateOnChange=function(a){var t,r=a.target,c=r.form,o="checkbox"===r.type?r.checked:r.value,i=f.a.validate(r);if(e.setState(Object(n.a)({},c.name,Object(s.a)(Object(s.a)({},e.state[c.name]),{},(t={},Object(n.a)(t,r.name,o),Object(n.a)(t,"errors",Object(s.a)(Object(s.a)({},e.state[c.name].errors),{},Object(n.a)({},r.name,i))),t)))),"role"==r.name){var l=e.state.roles.find((function(e){return e.nom==o}));console.log(l),e.setState({selectedRole:l})}},e.hasError=function(a,t,r){return e.state[a]&&e.state[a].errors&&e.state[a].errors[t]&&e.state[a].errors[t][r]},e.handleSubmit=function(a){var t=a.target,c=Object(r.a)(t.elements).filter((function(e){return["INPUT","SELECT"].includes(e.nodeName)})),o=f.a.bulkValidate(c),i=o.errors,l=o.hasError;e.setState(Object(n.a)({},t.name,Object(s.a)(Object(s.a)({},e.state[t.name]),{},{errors:i}))),console.log(l?"Form has errors. Check!":"Form Submitted!"),a.preventDefault(),console.log(l),l||e.addManager()},e.addManager=function(){var a=e.state.formManager,t=a.nom,r=a.email;d.a.post(b.e,{nom:t,email:r,role:e.state.selectedRole}).then((function(a){e.setState({formManager:{nom:"",email:"",role:""},selectedRole:{}}),console.log("Un manager de plus !"),j()("Super!","Manager ".concat(t," ajout\xe9 avec succ\xe8s"),"success").then((function(a){e.props.history.push("/list_manager/")}))})).catch((function(e){console.error("Error adding manager: ",e),j()("Desol\xe9e!",e.message,"warning")}))},e.formRef=function(a){return e.formManagerRef=a},e.state={formManager:{nom:"",email:"",role:""},roles:[],selectedRole:{},isLoading:!0,activeStep:"1",progressValue:[100,0,0],path:[{label:"Home",value:"/dashboard_admin"},{label:"Ajouter un manager",value:""}]},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){return console.log(this.state.formManager),Object(y.jsxs)(h.a,{children:[Object(y.jsx)(g.a,{path:this.state.path}),Object(y.jsx)(R,{manager:this.state,formRef:this.formRef,toggleStep:this.toggleStep,validateOnChange:this.validateOnChange,hasError:this.hasError,handleSubmit:this.handleSubmit})]})}}]),t}(u.Component));a.default=w}}]);
//# sourceMappingURL=15.c98010c0.chunk.js.map